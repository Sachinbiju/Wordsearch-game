<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Word Search Game - Horizontal & Vertical Only</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    h1 {
      color: #333;
      margin-top: 20px;
    }
    #stats {
      margin-top: 10px;
      font-size: 18px;
    }
    #grid {
      display: grid;
      grid-template-columns: repeat(12, 40px);
      gap: 2px;
      justify-content: center;
      margin-top: 20px;
      user-select: none;
    }
    .cell {
      width: 40px;
      height: 40px;
      background-color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #ccc;
      font-weight: bold;
      cursor: pointer;
    }
    .selected {
      background-color: lightblue;
    }
    .found {
      background-color: yellow;
    }
    #words {
      margin-top: 20px;
    }
    #words span {
      margin: 0 8px;
      font-weight: bold;
      display: inline-block;
      padding: 4px 8px;
    }
    .completed {
      text-decoration: line-through;
      color: grey;
    }
    footer {
      margin-top: 30px;
      padding: 10px;
      background-color: #eaeaea;
      font-size: 14px;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>Word Search Game</h1>
  <div id="stats">
    Time: <span id="time">0</span>s | Score: <span id="score">0</span>
  </div>
  <div id="grid"></div>
  <div id="words"></div>
  <footer>
    This is a project done by <strong>Sachin Biju</strong>. Enjoy and have fun!
  </footer>

  <script>
    const wordPool = [
      "HTML","CSS","JAVASCRIPT","PYTHON","JAVA","REACT","ANGULAR","VUE",
      "SWIFT","KOTLIN","RUBY","GO","SQL","NOSQL","GIT","LINUX","BASH","PERL",
      "PHP","HASKELL"
    ];

    const gridSize = 12;
    const words = [];
    const numberOfWords = 7;
    let grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(""));
    const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    let selectedCells = [];
    let isMouseDown = false;
    let score = 0;
    let foundWordsCount = 0;
    let timerInterval;
    let timeElapsed = 0;

    // Only horizontal & vertical (no diagonals)
    const directions = [
      [0, 1],  // right
      [0, -1], // left
      [1, 0],  // down
      [-1, 0]  // up
    ];

    function pickRandomWords() {
      const shuffled = [...wordPool].sort(() => Math.random() - 0.5);
      words.length = 0;
      for (let i = 0; i < numberOfWords; i++) {
        words.push(shuffled[i].toUpperCase());
      }
    }

    function placeWord(word) {
      let placed = false;
      while (!placed) {
        let row = Math.floor(Math.random() * gridSize);
        let col = Math.floor(Math.random() * gridSize);
        let [dr, dc] = directions[Math.floor(Math.random() * directions.length)];

        let endRow = row + dr * (word.length - 1);
        let endCol = col + dc * (word.length - 1);

        if (endRow >= 0 && endRow < gridSize && endCol >= 0 && endCol < gridSize) {
          let canPlace = true;
          for (let i = 0; i < word.length; i++) {
            let r = row + dr * i;
            let c = col + dc * i;
            if (grid[r][c] && grid[r][c] !== word[i]) {
              canPlace = false;
              break;
            }
          }
          if (canPlace) {
            for (let i = 0; i < word.length; i++) {
              let r = row + dr * i;
              let c = col + dc * i;
              grid[r][c] = word[i];
            }
            placed = true;
          }
        }
      }
    }

    function fillRandomLetters() {
      for (let r = 0; r < gridSize; r++) {
        for (let c = 0; c < gridSize; c++) {
          if (!grid[r][c]) {
            grid[r][c] = alphabet[Math.floor(Math.random() * alphabet.length)];
          }
        }
      }
    }

    function renderGrid() {
      const gridEl = document.getElementById("grid");
      gridEl.innerHTML = "";
      grid.forEach((row, r) => {
        row.forEach((letter, c) => {
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.textContent = letter;
          cell.dataset.row = r;
          cell.dataset.col = c;
          gridEl.appendChild(cell);
        });
      });
    }

    function renderWords() {
      const wordsEl = document.getElementById("words");
      wordsEl.innerHTML = "";
      words.forEach(w => {
        const span = document.createElement("span");
        span.textContent = w;
        span.id = "word-" + w;
        wordsEl.appendChild(span);
      });
    }

    function clearSelection() {
      selectedCells.forEach(cell => cell.classList.remove("selected"));
      selectedCells = [];
    }

    function getSelectedWord() {
      return selectedCells.map(c => c.textContent).join("");
    }

    function getSelectedWordReversed() {
      return selectedCells.map(c => c.textContent).reverse().join("");
    }

    function markAsFound(foundWord) {
      selectedCells.forEach(c => c.classList.add("found"));
      const wordSpan = document.getElementById("word-" + foundWord);
      if (wordSpan && !wordSpan.classList.contains("completed")) {
        wordSpan.classList.add("completed");
        score += 100;
        score += Math.max(0, 50 - Math.floor(timeElapsed / 2));
        document.getElementById("score").textContent = score;
        foundWordsCount++;
        if (foundWordsCount === words.length) {
          clearInterval(timerInterval);
          alert(`ðŸŽ‰ You found all words in ${timeElapsed}s! Final Score: ${score}`);
        }
      }
    }

    function attachEvents() {
      const gridEl = document.getElementById("grid");

      gridEl.addEventListener("mousedown", e => {
        if (e.target.classList.contains("cell")) {
          clearSelection();
          isMouseDown = true;
          e.target.classList.add("selected");
          selectedCells.push(e.target);
        }
      });

      gridEl.addEventListener("mouseover", e => {
        if (isMouseDown && e.target.classList.contains("cell") && !selectedCells.includes(e.target)) {
          e.target.classList.add("selected");
          selectedCells.push(e.target);
        }
      });

      document.addEventListener("mouseup", () => {
        if (selectedCells.length > 0) {
          const word = getSelectedWord();
          const wordRev = getSelectedWordReversed();
          if (words.includes(word)) {
            markAsFound(word);
          } else if (words.includes(wordRev)) {
            markAsFound(wordRev);
          }
        }
        clearSelection();
        isMouseDown = false;
      });

      gridEl.addEventListener("touchstart", e => {
        if (e.target.classList.contains("cell")) {
          e.preventDefault();
          clearSelection();
          selectedCells.push(e.target);
          e.target.classList.add("selected");
        }
      });

      gridEl.addEventListener("touchmove", e => {
        const touch = e.touches[0];
        const el = document.elementFromPoint(touch.clientX, touch.clientY);
        if (el && el.classList.contains("cell") && !selectedCells.includes(el)) {
          el.classList.add("selected");
          selectedCells.push(el);
        }
      });

      gridEl.addEventListener("touchend", () => {
        const word = getSelectedWord();
        const wordRev = getSelectedWordReversed();
        if (words.includes(word)) {
          markAsFound(word);
        } else if (words.includes(wordRev)) {
          markAsFound(wordRev);
        }
        clearSelection();
      });
    }

    function startTimer() {
      timeElapsed = 0;
      document.getElementById("time").textContent = timeElapsed;
      timerInterval = setInterval(() => {
        timeElapsed++;
        document.getElementById("time").textContent = timeElapsed;
      }, 1000);
    }

    function startGame() {
      pickRandomWords();
      grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(""));
      words.forEach(placeWord);
      fillRandomLetters();
      renderGrid();
      renderWords();
      attachEvents();
      foundWordsCount = 0;
      score = 0;
      document.getElementById("score").textContent = score;
      clearInterval(timerInterval);
      startTimer();
    }

    startGame();
  </script>
</body>
</html>
